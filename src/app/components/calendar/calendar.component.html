<div class="calendar-container">
    <h2 class="calendar-title">Calendario de Reservas</h2>
    <div class="calendar-navigation">
        <button (click)="previousMonth()" class="nav-button">&lt; Anterior</button>
        <div class="current-month-year">
            <div>{{ currentMonthYear }}</div>
        </div>
        <button (click)="nextMonth()" class="nav-button">Siguiente &gt;</button>
    </div>
    <div class="calendar-grid">
        <div class="calendar-weekday" *ngFor="let day of weekDays">{{ day }}</div>
        <div class="calendar-day" *ngFor="let day of calendarDays" 
             [ngClass]="{'today': isToday(day), 'other-month': !isCurrentMonth(day)}"
             (click)="openDayModal(day)">
            <span>{{ day.getDate() }}</span>
            <div class="available-space" *ngIf="hasAvailableSpace(day)">
                Espacio Disponible
            </div>
        </div>
    </div>
</div>

<!-- Modal para las reservas del día -->
<div class="modal" *ngIf="selectedDay">
  <div class="modal-content">
    <h2>Reservas para el {{ formatDateToSpanish(selectedDay) }}</h2>
    <div class="time-slots-grid">
      <div *ngFor="let timeSlot of timeSlots" class="time-slot">
        <span>{{ timeSlot }}</span>
        <button [ngClass]="{'reserved': !isTimeSlotAvailable(timeSlot)}" 
                (click)="openReservationModal(timeSlot)" 
                [disabled]="!isTimeSlotAvailable(timeSlot)">
          {{ isTimeSlotAvailable(timeSlot) ? 'Reservar' : 'Reservado' }}
        </button>
      </div>
    </div>
    <button class="close-button" (click)="closeDayModal()">Cerrar</button>
  </div>
</div>

<!-- Nuevo modal para realizar la reservación -->
<div class="reservation-modal" *ngIf="showReservationModal">
  <div class="reservation-modal-content">
    <h2>Realizar Reservación</h2>
    <p>Fecha: {{ formatDateToSpanish(selectedDay!) }}</p>
    <p>Hora: {{ selectedTimeSlot }}</p>
    <form (ngSubmit)="submitReservation()">
      <div class="reservation-form-group">
        <label for="name">Nombre:</label>
        <input type="text" id="name" [(ngModel)]="reservationData.name" name="name" required>
      </div>
      <div class="reservation-form-group">
        <label for="email">Correo electrónico:</label>
        <input type="email" id="email" [(ngModel)]="reservationData.email" name="email" required>
      </div>
      <div class="reservation-form-group">
        <label for="phone">Teléfono:</label>
        <input type="tel" id="phone" [(ngModel)]="reservationData.phone" name="phone" required>
      </div>
      <div class="reservation-button-group">
        <button type="submit">Confirmar Reservación</button>
        <button type="button" (click)="closeReservationModal()">Cancelar</button>
      </div>
    </form>
  </div>
</div>
